@using System.Timers;
@namespace BlazorApp

@code{
    int line = 0;
    int column = 3;
    Grid grille = new Grid(10, 20);
    List<List<int>> grid;
    @* grille.PlaceBlock(grid, BlocksShape.DisplayRandom(BlocksShape.shapesArray), line, column); *@

    void SetTimer()
    {
        // Create a timer with a two second interval.
        var timer = new Timer(1000);
        // Hook up the Elapsed event for the timer. 
        timer.Elapsed += OnTimedEvent;
        timer.AutoReset = true;
        timer.Enabled = true;
    }

    void OnTimedEvent(Object source, ElapsedEventArgs e)
    {
        grille.PlaceBlock(BlocksShape.DisplayRandom(BlocksShape.shapesArray), line, column);
        Console.WriteLine("hey !");
    }
}

<div class="page">
    @page "/game"
    <h1 class="name">TETRIS</h1> 
    <button type="button" class="button"><a href="">Retour au menu</a></button>

    <button type="button" class="btnTurn">Turn</button>
    <button type="button" class="btnLeft">Left</button>
    <button class="btnRight" @onclick= "() => {grille.MovementRight(grille.actualBlock);}">Right</button>
    <button type="button"  class="btnPause">Pause</button>
    <button type="button" class="btnSpeed">Speed</button>

    <div class="ScoreBoard">
        Score .... points
    </div>

    <div class="interface">

        JEU TETRIS

        <div id="grille">
            @for(int y = 0; y < grid.Count; y++){
                @for(int i = 0; i < grid.ElementAt(y).Count; i++)
                {
                    @if(grille.WhichBlock(y, i) == 0){
                        <div id="cell" class="cellEmpty"></div>
                    }
                    @if(grille.WhichBlock(y, i) == 1){
                        <div id="cell" class="cellSquare"></div>
                    }
                    @if(grille.WhichBlock(y, i) == 2){
                        <div id="cell" class="cellLine"></div>
                    }
                    @if(grille.WhichBlock(y, i) == 3){
                        <div id="cell" class="cellLBlock"></div>
                    }
                    @if(grille.WhichBlock(y, i) == 4){
                        <div id="cell" class="cellJBlock"></div>
                    }
                    @if(grille.WhichBlock(y, i) == 5){
                        <div id="cell" class="cellSBlock"></div>
                    }
                    @if(grille.WhichBlock(y, i) == 6){
                        <div id="cell" class="cellTBlock"></div>
                    }
                    @if(grille.WhichBlock(y, i) == 7){
                        <div id="cell" class="cellZBlock"></div>
                    }
                }
            }                        

        </div>

    </div>
</div>

